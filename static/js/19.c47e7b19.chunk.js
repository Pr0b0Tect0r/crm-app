(this["webpackJsonpcrm-app"]=this["webpackJsonpcrm-app"]||[]).push([[19],{612:function(e,a,t){"use strict";t.r(a);var n=t(167),r=t(104),o=t.n(r),l=t(105),c=t(114),i=t(84),s=t(1),m=t.n(s),u=t(554),d=t(556),p=t(313),f=t(506),E=t(284),h=t(508),b=t(509),y=t(519),v=t(510),g=t(511),O=t(285),k=t(174),w=t.n(k),C=t(20);var j=function(e,a,t,n){var r="";localStorage.getItem("tokenGoogle")&&(r=JSON.parse(localStorage.getItem("tokenGoogle")));var c={},i="".concat(C.a.urlCalendar).concat(a).concat(n);return"POST"===e&&(c={method:e,body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(r)}}),"GET"===e&&(c={method:e,headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(r)}}),new Promise(function(){var e=Object(l.a)(o.a.mark((function e(a,t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(i,c).then((function(e){return e.json()})).then((function(e){a(e)})).catch((function(e){t(e)}));case 2:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}())},S=t(608),I=t(557),T=t(176),P=t.n(T),x=t(549),D=t(226),N=t(564),G=t(579),M=t(569),z=t(563),A=t(572),L=t(575),W=t(576),B=t(578),F=t(204),J=t.n(F),_=t(503),q=t(558),K=t(513),R=t.n(K),U=t(205),V=t(514),Z=t.n(V),H=t(512),Q=t.n(H),X=t(515),Y=t.n(X),$=t(70),ee=t(573),ae=t(12),te=t(567),ne=t(568),re=t(574),oe=t(607),le=t(553),ce=t(551),ie=t(611),se=t(605),me=t(571),ue=t(224),de=t.n(ue);function pe(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function fe(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?pe(t,!0).forEach((function(a){Object(c.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pe(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}t.d(a,"default",(function(){return ye}));var Ee="https://mail.google.com https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/calendar https://www.google.com/m8/feeds/ https://www.googleapis.com/auth/contacts.readonly",he=Object(p.a)((function(e){return{root:{width:"100%",marginTop:e.spacing(10)},close:{padding:e.spacing(.5)},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},avatar:{backgroundColor:e.palette.primary.main},buttonSuccess:{backgroundColor:ee.a[500],"&:hover":{backgroundColor:ee.a[700]}},fabProgress:{color:ee.a[500],position:"absolute",top:-6,left:-6,zIndex:1},buttonProgress:{color:ee.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},cabeceraDialog:{position:"relative"},invitadoss:{backgroundColor:e.palette.secondary.main,width:30,height:30}}})),be=m.a.forwardRef((function(e,a){return m.a.createElement(B.a,Object.assign({direction:"up",ref:a},e))}));function ye(){var e=he(),a=m.a.useState([]),t=Object(i.a)(a,2),r=t[0],s=t[1],p=m.a.useState(!1),k=Object(i.a)(p,2),T=k[0],B=k[1],F=m.a.useState({}),K=Object(i.a)(F,2),V=K[0],H=K[1],X=m.a.useState({}),ee=Object(i.a)(X,2),ue=ee[0],pe=ee[1],ye=m.a.useState(!1),ve=Object(i.a)(ye,2),ge=ve[0],Oe=ve[1],ke=m.a.useState(""),we=Object(i.a)(ke,2),Ce=we[0],je=we[1],Se=m.a.useState(""),Ie=Object(i.a)(Se,2),Te=Ie[0],Pe=Ie[1],xe=JSON.parse(localStorage.getItem("perfilGoogle")),De=m.a.useState({}),Ne=Object(i.a)(De,2),Ge=Ne[0],Me=Ne[1],ze=m.a.useState(!1),Ae=Object(i.a)(ze,2),Le=Ae[0],We=Ae[1],Be=m.a.useState(!1),Fe=Object(i.a)(Be,2),Je=Fe[0],_e=Fe[1],qe=m.a.useState(!1),Ke=Object(i.a)(qe,2),Re=Ke[0],Ue=Ke[1],Ve=m.a.useState({}),Ze=Object(i.a)(Ve,2),He=Ze[0],Qe=Ze[1],Xe=m.a.useState([]),Ye=Object(i.a)(Xe,2),$e=Ye[0],ea=Ye[1],aa=m.a.useState(""),ta=Object(i.a)(aa,2),na=ta[0],ra=ta[1],oa=m.a.useState(11),la=Object(i.a)(oa,2),ca=la[0],ia=la[1],sa=m.a.useRef(),ma=Object(ae.a)(Object(c.a)({},e.buttonSuccess,Re)),ua=function(){j("GET","","","").then((function(e){s(e),e.hasOwnProperty("error")?w.a.load("auth2",da):s(fa(e)),B(!0)}))};function da(){w.a.auth2.authorize({apiKey:"".concat(C.a.api_key),client_id:"".concat(C.a.client_id),scope:Ee,cookie_policy:"none"},(function(e){localStorage.setItem("tokenGoogle",JSON.stringify(e.access_token)),pa(e.access_token),ua()}))}var pa=function(){var e=Object(l.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.googleapis.com/oauth2/v1/userinfo?alt=json&access_token=".concat(a),{method:"GET",headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("perfilGoogle",JSON.stringify(e))}));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),fa=function(e){var a=[e.items],t=[];return a.forEach((function(e){for(var a=0;a<e.length;a++)if(e[a].start.hasOwnProperty("dateTime")){var n={start:e[a].start.dateTime,end:e[a].end.dateTime,title:e[a].summary,id:e[a].id,backgroundColor:"1"===e[a].colorId?"#a4bdfc":"2"===e[a].colorId?"#2896e2":"3"===e[a].colorId?"#9305a6":"4"===e[a].colorId?"#ff887c":"5"===e[a].colorId?"#fbd75b":"6"===e[a].colorId?"#ffb878":"7"===e[a].colorId?"#46d6db":"8"===e[a].colorId?"#616161":"9"===e[a].colorId?"#5484ed":"10"===e[a].colorId?"#51b749":"11"===e[a].colorId?"#dc2127":"#E10000"};t.push(n)}else if(e[a].start.hasOwnProperty("date")){var r={start:e[a].start.date,end:e[a].end.date,title:e[a].summary,id:e[a].id,backgroundColor:"1"===e[a].colorId?"#a4bdfc":"2"===e[a].colorId?"#2896e2":"3"===e[a].colorId?"#9305a6":"4"===e[a].colorId?"#ff887c":"5"===e[a].colorId?"#fbd75b":"6"===e[a].colorId?"#ffb878":"7"===e[a].colorId?"#46d6db":"8"===e[a].colorId?"#e1e1e1":"9"===e[a].colorId?"#5484ed":"10"===e[a].colorId?"#51b749":"11"===e[a].colorId?"#dc2127":"#E10000"};t.push(r)}})),t},Ea=function(){B(!1)},ha=function(e){j("GET","/","","".concat(e)).then((function(e){if(H(e),e.start.hasOwnProperty("dateTime")){var a=e.start.dateTime?e.start.dateTime:{},t=e.end.dateTime?e.end.dateTime:{};pe({start:a.substr(0,10)+" - "+a.substr(11,5),end:t.substr(0,10)+" - "+t.substr(11,5)})}else if(e.start.hasOwnProperty("date")){var n=e.start.date?e.start.date:{},r=e.end.date?e.end.date:{};pe({start:n,end:r})}})),Oe(!0)},ba=function(){Oe(!1),pe({}),je(""),H({}),Pe("")},ya=function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("tokenGoogle")),e.next=3,fetch("https://www.googleapis.com/calendar/v3/calendars/primary/events/".concat(Te),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}}).then((function(){Oe(!1),pe({}),je(""),H({}),Pe("")}));case 3:ua();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),va=function(e){Qe(fe({},He,Object(c.a)({},e.target.name,e.target.value)))},ga=function(e){ra(e.target.value)},Oa=function(e){13===e.keyCode&&(ea([].concat(Object(n.a)($e),[{email:na,responseStatus:"accepted"}])),Qe(fe({},He,{sendUpdates:"all",attendees:[].concat(Object(n.a)($e),[{email:na,responseStatus:"accepted"}])})),document.activeElement.value="")},ka=function(e){ia(e.target.value),Qe(fe({},He,{colorId:e.target.value}))};return m.a.useEffect(ua,[]),m.a.createElement(m.a.Fragment,null,m.a.createElement(u.a,null),m.a.createElement(S.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:T,autoHideDuration:2e3,onClose:Ea,style:{opacity:"0.8"},ContentProps:{"aria-describedby":"message-id"},message:m.a.createElement(x.a,{id:"message-id",variant:"button"},"Cargando eventos... ",m.a.createElement(D.a,{color:"primary",style:{width:"100%",marginBottom:0}})),action:[m.a.createElement(I.a,{key:"close","aria-label":"close",color:"inherit",className:e.close,onClick:Ea},m.a.createElement(P.a,null))]}),m.a.createElement(N.a,{fullWidth:!0,open:Le,onClose:function(){return We(!1)}},m.a.createElement(te.a,{disableTypography:!0},m.a.createElement(d.a,{elevation:24},m.a.createElement(L.a,{className:e.cabeceraDialog},m.a.createElement(W.a,null,m.a.createElement(x.a,{variant:"h6",className:e.title},"Crear Evento"),m.a.createElement(Q.a,null))))),m.a.createElement(ne.a,null,m.a.createElement(oe.a,{xsDown:!0},m.a.createElement(le.a,{container:!0,direction:"column",spacing:2},m.a.createElement(le.a,{item:!0,xs:12,sm:12},m.a.createElement(ie.a,{autoComplete:"summary",name:"summary",autoFocus:!0,fullWidth:!0,label:"T\xedtulo del evento",placeholder:"\xbfC\xf3mo deseas nombrar el evento?",required:!0,onChange:va,type:"text",variant:"outlined"})),m.a.createElement(le.a,{item:!0,xs:12,sm:12},m.a.createElement(ie.a,{autoComplete:"description",fullWidth:!0,multiline:!0,rows:5,label:"Descripci\xf3n",name:"description",placeholder:"Describe tu evento",onChange:va,required:!0,type:"text",variant:"outlined"})),m.a.createElement(le.a,{item:!0,xs:12,sm:12},m.a.createElement(ie.a,{id:"email",autoComplete:"email",name:"email",fullWidth:!0,label:"Participante",placeholder:"participante@correo.com",onKeyDown:Oa,onChange:ga,type:"email",variant:"outlined"})),m.a.createElement(le.a,{item:!0,xs:12,sm:12},m.a.createElement(z.a,null,$e.length>0?$e.map((function(a,t){return m.a.createElement(M.a,{key:t},m.a.createElement(U.a,null,m.a.createElement(q.a,{className:e.invitadoss,size:"small"},a.email.substr(0,1))),m.a.createElement(G.a,{primary:a.email}))})):m.a.createElement(M.a,null,m.a.createElement(G.a,{primary:"A\xfan no posee invitados"})))),m.a.createElement(le.a,{item:!0,xs:12,sm:12},m.a.createElement(de.a,{style:{color:1===ca?"#a4bdfc":2===ca?"#7ae7bf":3===ca?"#dbadff":4===ca?"#ff887c":5===ca?"#fbd75b":6===ca?"#ffb878":7===ca?"#46d6db":8===ca?"#e1e1e1":9===ca?"#5484ed":10===ca?"#51b749":11===ca?"#dc2127":""}}),m.a.createElement(se.a,{value:ca,onChange:ka},m.a.createElement(me.a,{key:0,value:1},"Melrose"),m.a.createElement(me.a,{key:1,value:2},"Riptide"),m.a.createElement(me.a,{key:2,value:3},"Malva"),m.a.createElement(me.a,{key:3,value:4},"Mandarina"),m.a.createElement(me.a,{key:4,value:5},"Dandelion"),m.a.createElement(me.a,{key:5,value:6},"Dorado"),m.a.createElement(me.a,{key:6,value:7},"Turquesa"),m.a.createElement(me.a,{key:7,value:8},"Plomo"),m.a.createElement(me.a,{key:8,value:9},"Azul"),m.a.createElement(me.a,{key:9,value:10},"Verde Manzana"),m.a.createElement(me.a,{key:10,value:11},"Carmes\xed"))),m.a.createElement(le.a,{item:!0,xs:12,sm:12},m.a.createElement(x.a,{variant:"h6"},"Fecha"),m.a.createElement(x.a,{variant:"button"},"".concat(Ge.inicio," - ").concat(Ge.fin))))),m.a.createElement(oe.a,{smUp:!0},m.a.createElement(le.a,{container:!0,direction:"column",spacing:2},m.a.createElement(le.a,{item:!0,xs:!0},m.a.createElement(ie.a,{autoComplete:"summary",name:"summary",fullWidth:!0,label:"T\xedtulo del evento",placeholder:"\xbfC\xf3mo deseas nombrar el evento?",required:!0,onChange:va,type:"text",variant:"outlined"})),m.a.createElement(le.a,{item:!0,xs:!0},m.a.createElement(ie.a,{autoComplete:"description",fullWidth:!0,multiline:!0,rows:5,label:"Descripci\xf3n",name:"description",placeholder:"Describe tu evento",onChange:va,required:!0,type:"text",variant:"outlined"})),m.a.createElement(le.a,{item:!0},m.a.createElement(ie.a,{autoComplete:"email",name:"email",fullWidth:!0,label:"Participante",placeholder:"participante@correo.com",onKeyDown:Oa,onChange:ga,type:"email",variant:"outlined"})),m.a.createElement(le.a,{item:!0},m.a.createElement(de.a,{style:{color:1===ca?"#a4bdfc":2===ca?"#7ae7bf":3===ca?"#dbadff":4===ca?"#ff887c":5===ca?"#fbd75b":6===ca?"#ffb878":7===ca?"#46d6db":8===ca?"#e1e1e1":9===ca?"#5484ed":10===ca?"#51b749":11===ca?"#dc2127":""}}),m.a.createElement(se.a,{value:ca,onChange:ka},m.a.createElement(me.a,{key:0,value:1},"Melrose"),m.a.createElement(me.a,{key:1,value:2},"Riptide"),m.a.createElement(me.a,{key:2,value:3},"Mauve"),m.a.createElement(me.a,{key:3,value:4},"Vivid Tangerine"),m.a.createElement(me.a,{key:4,value:5},"Dandelion"),m.a.createElement(me.a,{key:5,value:6},"Macaroni and Cheese"),m.a.createElement(me.a,{key:6,value:7},"Turquoise"),m.a.createElement(me.a,{key:7,value:8},"Mercury"),m.a.createElement(me.a,{key:8,value:9},"Cornflower Blue"),m.a.createElement(me.a,{key:9,value:10},"Apple"),m.a.createElement(me.a,{key:10,value:11},"Alizarin Crimson"))),m.a.createElement(le.a,{item:!0},m.a.createElement(z.a,null,$e.length>0?$e.map((function(a,t){return m.a.createElement(M.a,{key:t},m.a.createElement(U.a,null,m.a.createElement(q.a,{className:e.invitadoss,size:"small"},a.email.substr(0,1))),m.a.createElement(G.a,{primary:a.email}))})):m.a.createElement(M.a,null,m.a.createElement(G.a,{primary:"A\xfan no posee invitados"})))),m.a.createElement(le.a,{item:!0},m.a.createElement(x.a,{variant:"h6"},"Fecha"),m.a.createElement(x.a,{variant:"button"},"".concat(Ge.inicio," - ").concat(Ge.fin)))))),m.a.createElement(re.a,null,m.a.createElement(ce.a,{color:"secondary",onClick:function(){return ea([]),void We(!1)}},"Cerrar"),m.a.createElement(ce.a,{onClick:function(){Je||(Ue(!1),_e(!0),sa.current=setTimeout((function(){Ue(!0),_e(!1),j("POST","",He,"?alt=json").then((function(){We(!1),ua(),ea([])}))}),2e3))},color:"primary",className:ma,disabled:Je,variant:"contained"},Je&&m.a.createElement($.a,{size:24,className:e.buttonProgress}),"Guardar"))),m.a.createElement(N.a,{fullScreen:!0,open:ge,onClose:ba,TransitionComponent:be},m.a.createElement(L.a,{className:e.appBar,style:{backgroundColor:Ce}},m.a.createElement(W.a,null,m.a.createElement(I.a,{edge:"start",color:"inherit",onClick:ba,"aria-label":"cerrar"},m.a.createElement(P.a,null)),m.a.createElement(x.a,{variant:"h6",className:e.title},V.summary),m.a.createElement(_.a,{size:"small",color:"secondary","aria-label":"eliminar",onClick:function(){return ya()}},m.a.createElement(J.a,null)))),m.a.createElement(z.a,null,m.a.createElement(M.a,null,m.a.createElement(U.a,null,m.a.createElement(q.a,{className:e.avatar},m.a.createElement(R.a,null))),m.a.createElement(G.a,{primary:V.hasOwnProperty("attendees")?V.attendees.length+" Invitado(s)":"",secondary:V.hasOwnProperty("attendees")?V.attendees.map((function(e){return e.email+", "})):"No posee invitados"})),m.a.createElement(A.a,null),m.a.createElement(M.a,null,m.a.createElement(U.a,null,m.a.createElement(q.a,{className:e.avatar},m.a.createElement(Z.a,null))),m.a.createElement(G.a,{primary:"Descripci\xf3n",secondary:V.hasOwnProperty("description")?V.description:"No posee descripci\xf3n"})),m.a.createElement(A.a,null),m.a.createElement(M.a,null,m.a.createElement(U.a,null,m.a.createElement(q.a,{className:e.avatar},m.a.createElement(Q.a,null))),m.a.createElement(G.a,{primary:"Creador",secondary:V.hasOwnProperty("creator")?V.creator.email:""})),m.a.createElement(A.a,null),m.a.createElement(M.a,null,m.a.createElement(U.a,null,m.a.createElement(q.a,{className:e.avatar},m.a.createElement(Y.a,null))),m.a.createElement(G.a,{primary:"Inicio",secondary:ue.start})),m.a.createElement(A.a,null),m.a.createElement(M.a,null,m.a.createElement(U.a,null,m.a.createElement(q.a,{className:e.avatar},m.a.createElement(Y.a,null))),m.a.createElement(G.a,{primary:"Final",secondary:ue.end})))),m.a.createElement(d.a,{elevation:4,className:e.root},m.a.createElement(f.a,{selectable:!0,select:function(e){var a=e.startStr.substr(0,19),t=e.endStr.substr(0,19);We(!0),Me(fe({},Ge,{inicio:a,fin:t})),19===a.length?Qe({colorId:ca,start:{dateTime:a,timeZone:"America/Lima"},end:{dateTime:t,timeZone:"America/Lima"},reminders:{useDefault:!1,overrides:[{method:"email",minutes:30},{method:"popup",minutes:10}]}}):10===a.length&&Qe({colorId:ca,start:{date:a},end:{date:t},reminders:{useDefault:!1,overrides:[{method:"email",minutes:1440},{method:"popup",minutes:10}]}})},weekNumbers:!0,editable:!0,defaultView:"dayGridMonth",plugins:[E.d,h.a,b.a,O.f,y.a,v.a,g.a],themeSystem:"standart",events:r,header:{left:"prev,next, today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listMonth"},locale:xe.locale,eventClick:function(e){ha(e.event.id),je(e.event.backgroundColor),Pe(e.event.id)},eventLimit:!0,eventTextColor:"#fff",eventBorderColor:"rgba(0, 0, 0, 0)",navLinks:!0,schedulerLicenseKey:"GPL-My-Project-Is-Open-Source",slotDuration:"00:15",nowIndicator:!0,buttonText:{dayGridMonth:"mes",timeGridWeek:"semana",timeGridDay:"d\xeda",listMonth:"lista",today:"hoy"},eventTimeFormat:{hour:"2-digit",minute:"2-digit",second:"2-digit",meridiem:!0}})))}}}]);
//# sourceMappingURL=19.c47e7b19.chunk.js.map