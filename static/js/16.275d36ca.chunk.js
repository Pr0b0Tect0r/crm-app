(this["webpackJsonpcrm-app"]=this["webpackJsonpcrm-app"]||[]).push([[16],{570:function(e,a,t){"use strict";t.r(a);var n=t(111),r=t.n(n),o=t(112),l=t(133),c=t(87),i=t(1),s=t.n(i),m=t(523),u=t(524),d=t(281),p=t(480),f=t(254),E=t(482),h=t(483),b=t(497),v=t(484),y=t(485),g=t(255),O=t(150),k=t.n(O),w=t(95);var C=function(e,a,t,n){var l="";localStorage.getItem("tokenGoogle")&&(l=JSON.parse(localStorage.getItem("tokenGoogle")));var c={},i="".concat(w.a.urlCalendar).concat(a).concat(n);return"POST"===e&&(c={method:e,body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(l)}}),"GET"===e&&(c={method:e,headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(l)}}),new Promise(function(){var e=Object(o.a)(r.a.mark((function e(a,t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(i,c).then((function(e){return e.json()})).then((function(e){a(e)})).catch((function(e){t(e)}));case 2:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}())},j=t(567),S=t(543),I=t(252),T=t.n(I),P=t(520),N=t(314),D=t(532),x=t(546),G=t(537),M=t(531),z=t(540),L=t(541),q=t(542),A=t(545),B=t(253),J=t.n(B),W=t(476),F=t(525),_=t(488),R=t.n(_),U=t(487),V=t(489),K=t.n(V),Z=t(486),H=t.n(Z),Q=t(490),X=t.n(Q),Y=t(68),$=t(310),ee=t(12),ae=t(535),te=t(536),ne=t(551),re=t(565),oe=t(191),le=t(522),ce=t(569),ie=t(563),se=t(539),me=t(195),ue=t.n(me);function de(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function pe(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?de(t,!0).forEach((function(a){Object(l.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):de(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}t.d(a,"default",(function(){return be}));var fe="https://mail.google.com https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/calendar https://www.google.com/m8/feeds/ https://www.googleapis.com/auth/contacts.readonly",Ee=Object(d.a)((function(e){return{root:{width:"100%",marginTop:e.spacing(10)},close:{padding:e.spacing(.5)},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},avatar:{backgroundColor:e.palette.primary.main},buttonSuccess:{backgroundColor:$.a[500],"&:hover":{backgroundColor:$.a[700]}},fabProgress:{color:$.a[500],position:"absolute",top:-6,left:-6,zIndex:1},buttonProgress:{color:$.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},cabeceraDialog:{position:"relative"}}})),he=s.a.forwardRef((function(e,a){return s.a.createElement(A.a,Object.assign({direction:"up",ref:a},e))}));function be(){var e=Ee(),a=s.a.useState([]),t=Object(c.a)(a,2),n=t[0],i=t[1],d=s.a.useState(!1),O=Object(c.a)(d,2),I=O[0],A=O[1],B=s.a.useState({}),_=Object(c.a)(B,2),V=_[0],Z=_[1],Q=s.a.useState({}),$=Object(c.a)(Q,2),me=$[0],de=$[1],be=s.a.useState(!1),ve=Object(c.a)(be,2),ye=ve[0],ge=ve[1],Oe=s.a.useState(""),ke=Object(c.a)(Oe,2),we=ke[0],Ce=ke[1],je=s.a.useState(""),Se=Object(c.a)(je,2),Ie=Se[0],Te=Se[1],Pe=JSON.parse(localStorage.getItem("perfilGoogle")),Ne=s.a.useState({}),De=Object(c.a)(Ne,2),xe=De[0],Ge=De[1],Me=s.a.useState(!1),ze=Object(c.a)(Me,2),Le=ze[0],qe=ze[1],Ae=s.a.useState(!1),Be=Object(c.a)(Ae,2),Je=Be[0],We=Be[1],Fe=s.a.useState(!1),_e=Object(c.a)(Fe,2),Re=_e[0],Ue=_e[1],Ve=s.a.useState({}),Ke=Object(c.a)(Ve,2),Ze=Ke[0],He=Ke[1],Qe=s.a.useState({}),Xe=Object(c.a)(Qe,2),Ye=Xe[0],$e=Xe[1],ea=s.a.useState(11),aa=Object(c.a)(ea,2),ta=aa[0],na=aa[1],ra=s.a.useRef(),oa=Object(ee.a)(Object(l.a)({},e.buttonSuccess,Re)),la=function(){C("GET","","","").then((function(e){i(e),e.hasOwnProperty("error")?k.a.load("auth2",ca):i(sa(e)),A(!0)}))};function ca(){k.a.auth2.authorize({apiKey:"".concat(w.a.api_key),client_id:"".concat(w.a.client_id),scope:fe,cookie_policy:"none"},(function(e){localStorage.setItem("tokenGoogle",JSON.stringify(e.access_token)),ia(e.access_token),la()}))}var ia=function(){var e=Object(o.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.googleapis.com/oauth2/v1/userinfo?alt=json&access_token=".concat(a),{method:"GET",headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("perfilGoogle",JSON.stringify(e))}));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),sa=function(e){var a=[e.items],t=[];return a.forEach((function(e){for(var a=0;a<e.length;a++)if(e[a].start.hasOwnProperty("dateTime")){var n={start:e[a].start.dateTime,end:e[a].end.dateTime,title:e[a].summary,id:e[a].id,backgroundColor:"1"===e[a].colorId?"#a4bdfc":"2"===e[a].colorId?"#2896e2":"3"===e[a].colorId?"#9305a6":"4"===e[a].colorId?"#ff887c":"5"===e[a].colorId?"#fbd75b":"6"===e[a].colorId?"#ffb878":"7"===e[a].colorId?"#46d6db":"8"===e[a].colorId?"#616161":"9"===e[a].colorId?"#5484ed":"10"===e[a].colorId?"#51b749":"11"===e[a].colorId?"#dc2127":"#E10000"};t.push(n)}else if(e[a].start.hasOwnProperty("date")){var r={start:e[a].start.date,end:e[a].end.date,title:e[a].summary,id:e[a].id,backgroundColor:"1"===e[a].colorId?"#a4bdfc":"2"===e[a].colorId?"#2896e2":"3"===e[a].colorId?"#9305a6":"4"===e[a].colorId?"#ff887c":"5"===e[a].colorId?"#fbd75b":"6"===e[a].colorId?"#ffb878":"7"===e[a].colorId?"#46d6db":"8"===e[a].colorId?"#e1e1e1":"9"===e[a].colorId?"#5484ed":"10"===e[a].colorId?"#51b749":"11"===e[a].colorId?"#dc2127":"#E10000"};t.push(r)}})),t},ma=function(){A(!1)},ua=function(e){C("GET","/","","".concat(e)).then((function(e){if(Z(e),e.start.hasOwnProperty("dateTime")){var a=e.start.dateTime?e.start.dateTime:{},t=e.end.dateTime?e.end.dateTime:{};de({start:a.substr(0,10)+" - "+a.substr(11,5),end:t.substr(0,10)+" - "+t.substr(11,5)})}else if(e.start.hasOwnProperty("date")){var n=e.start.date?e.start.date:{},r=e.end.date?e.end.date:{};de({start:n,end:r})}})),ge(!0)},da=function(){ge(!1),de({}),Ce(""),Z({}),Te("")},pa=function(){var e=Object(o.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("tokenGoogle")),e.next=3,fetch("https://www.googleapis.com/calendar/v3/calendars/primary/events/".concat(Ie),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}}).then((function(){ge(!1),de({}),Ce(""),Z({}),Te("")}));case 3:la();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fa=function(){Je||(Ue(!1),We(!0),ra.current=setTimeout((function(){Ue(!0),We(!1),C("POST","",Ze,"?alt=json").then((function(){qe(!1),la()}))}),2e3))},Ea=function(e){He(pe({},Ze,Object(l.a)({},e.target.name,e.target.value)))},ha=function(e){$e(pe({},Ye,Object(l.a)({},e.target.name,e.target.value)))},ba=function(e){na(e.target.value),He(pe({},Ze,{colorId:e.target.value}))};return s.a.useEffect(la,[]),s.a.createElement(s.a.Fragment,null,s.a.createElement(m.a,null),s.a.createElement(j.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:I,autoHideDuration:2e3,onClose:ma,style:{opacity:"0.8"},ContentProps:{"aria-describedby":"message-id"},message:s.a.createElement(P.a,{id:"message-id",variant:"button"},"Cargando eventos... ",s.a.createElement(N.a,{color:"primary",style:{width:"100%",marginBottom:0}})),action:[s.a.createElement(S.a,{key:"close","aria-label":"close",color:"inherit",className:e.close,onClick:ma},s.a.createElement(T.a,null))]}),s.a.createElement(D.a,{fullWidth:!0,open:Le,onClose:function(){return qe(!1)}},s.a.createElement(ae.a,{disableTypography:!0},s.a.createElement(u.a,{elevation:24},s.a.createElement(L.a,{className:e.cabeceraDialog},s.a.createElement(q.a,null,s.a.createElement(P.a,{variant:"h6",className:e.title},"Crear Evento"),s.a.createElement(H.a,null))))),s.a.createElement(te.a,null,s.a.createElement(re.a,{xsDown:!0},s.a.createElement(oe.a,{container:!0,spacing:1},s.a.createElement(oe.a,{item:!0,xs:12},s.a.createElement(oe.a,{container:!0,direction:"column",spacing:2},s.a.createElement(oe.a,{item:!0},s.a.createElement(ce.a,{autoComplete:"summary",name:"summary",fullWidth:!0,label:"T\xedtulo del evento",placeholder:"\xbfC\xf3mo deseas nombrar el evento?",required:!0,onChange:Ea,type:"text",variant:"outlined"})),s.a.createElement(oe.a,{item:!0},s.a.createElement(ce.a,{autoComplete:"description",fullWidth:!0,multiline:!0,rows:5,label:"Descripci\xf3n",name:"description",placeholder:"Describe tu evento",onChange:Ea,required:!0,type:"text",variant:"outlined"})),s.a.createElement(oe.a,{item:!0},s.a.createElement(ce.a,{autoComplete:"email",name:"email",fullWidth:!0,label:"Participante",placeholder:"participante@correo.com",required:!0,onChange:ha,type:"email",variant:"outlined"})),s.a.createElement(oe.a,{item:!0},s.a.createElement(ue.a,{style:{color:1===ta?"#a4bdfc":2===ta?"#7ae7bf":3===ta?"#dbadff":4===ta?"#ff887c":5===ta?"#fbd75b":6===ta?"#ffb878":7===ta?"#46d6db":8===ta?"#e1e1e1":9===ta?"#5484ed":10===ta?"#51b749":11===ta?"#dc2127":""}}),s.a.createElement(ie.a,{value:ta,onChange:ba},s.a.createElement(se.a,{key:0,value:1},"Melrose"),s.a.createElement(se.a,{key:1,value:2},"Riptide"),s.a.createElement(se.a,{key:2,value:3},"Malva"),s.a.createElement(se.a,{key:3,value:4},"Mandarina"),s.a.createElement(se.a,{key:4,value:5},"Dandelion"),s.a.createElement(se.a,{key:5,value:6},"Dorado"),s.a.createElement(se.a,{key:6,value:7},"Turquesa"),s.a.createElement(se.a,{key:7,value:8},"Plomo"),s.a.createElement(se.a,{key:8,value:9},"Azul"),s.a.createElement(se.a,{key:9,value:10},"Verde Manzana"),s.a.createElement(se.a,{key:10,value:11},"Carmes\xed"))),s.a.createElement(oe.a,{item:!0},s.a.createElement(P.a,{variant:"h6"},"Fecha"),s.a.createElement(P.a,{variant:"button"},"".concat(xe.inicio," - ").concat(xe.fin))))))),s.a.createElement(re.a,{smUp:!0},s.a.createElement(oe.a,{container:!0,direction:"column",spacing:2},s.a.createElement(oe.a,{item:!0,xs:!0},s.a.createElement(ce.a,{autoComplete:"summary",name:"summary",fullWidth:!0,label:"T\xedtulo del evento",placeholder:"\xbfC\xf3mo deseas nombrar el evento?",required:!0,onChange:Ea,type:"text",variant:"outlined"})),s.a.createElement(oe.a,{item:!0,xs:!0},s.a.createElement(ce.a,{autoComplete:"description",fullWidth:!0,multiline:!0,rows:5,label:"Descripci\xf3n",name:"description",placeholder:"Describe tu evento",onChange:Ea,required:!0,type:"text",variant:"outlined"})),s.a.createElement(oe.a,{item:!0},s.a.createElement(ce.a,{autoComplete:"email",name:"email",fullWidth:!0,label:"Participante",placeholder:"participante@correo.com",required:!0,onChange:ha,type:"email",variant:"outlined"})),s.a.createElement(oe.a,{item:!0},s.a.createElement(ue.a,{style:{color:1===ta?"#a4bdfc":2===ta?"#7ae7bf":3===ta?"#dbadff":4===ta?"#ff887c":5===ta?"#fbd75b":6===ta?"#ffb878":7===ta?"#46d6db":8===ta?"#e1e1e1":9===ta?"#5484ed":10===ta?"#51b749":11===ta?"#dc2127":""}}),s.a.createElement(ie.a,{value:ta,onChange:ba},s.a.createElement(se.a,{key:0,value:1},"Melrose"),s.a.createElement(se.a,{key:1,value:2},"Riptide"),s.a.createElement(se.a,{key:2,value:3},"Mauve"),s.a.createElement(se.a,{key:3,value:4},"Vivid Tangerine"),s.a.createElement(se.a,{key:4,value:5},"Dandelion"),s.a.createElement(se.a,{key:5,value:6},"Macaroni and Cheese"),s.a.createElement(se.a,{key:6,value:7},"Turquoise"),s.a.createElement(se.a,{key:7,value:8},"Mercury"),s.a.createElement(se.a,{key:8,value:9},"Cornflower Blue"),s.a.createElement(se.a,{key:9,value:10},"Apple"),s.a.createElement(se.a,{key:10,value:11},"Alizarin Crimson"))),s.a.createElement(oe.a,{item:!0},s.a.createElement(P.a,{variant:"h6"},"Fecha"),s.a.createElement(P.a,{variant:"button"},"".concat(xe.inicio," - ").concat(xe.fin)))))),s.a.createElement(ne.a,null,s.a.createElement(le.a,{color:"secondary",onClick:function(){return qe(!1)}},"Cerrar"),s.a.createElement(le.a,{onClick:function(){Ye.hasOwnProperty("email")?(He(pe({},Ze,{sendUpdates:"all",attendees:[pe({},Ye,{responseStatus:"accepted"})]})),fa()):(He(pe({},Ze)),fa())},color:"primary",className:oa,disabled:Je,variant:"contained"},Je&&s.a.createElement(Y.a,{size:24,className:e.buttonProgress}),"Guardar"))),s.a.createElement(D.a,{fullScreen:!0,open:ye,onClose:da,TransitionComponent:he},s.a.createElement(L.a,{className:e.appBar,style:{backgroundColor:we}},s.a.createElement(q.a,null,s.a.createElement(S.a,{edge:"start",color:"inherit",onClick:da,"aria-label":"cerrar"},s.a.createElement(T.a,null)),s.a.createElement(P.a,{variant:"h6",className:e.title},V.summary),s.a.createElement(W.a,{size:"small",color:"secondary","aria-label":"eliminar",onClick:function(){return pa()}},s.a.createElement(J.a,null)))),s.a.createElement(M.a,null,s.a.createElement(G.a,null,s.a.createElement(U.a,null,s.a.createElement(F.a,{className:e.avatar},s.a.createElement(R.a,null))),s.a.createElement(x.a,{primary:V.hasOwnProperty("attendees")?V.attendees.length+" Invitado(s)":"",secondary:V.hasOwnProperty("attendees")?V.attendees.map((function(e){return e.email+", "})):"No posee invitados"})),s.a.createElement(z.a,null),s.a.createElement(G.a,null,s.a.createElement(U.a,null,s.a.createElement(F.a,{className:e.avatar},s.a.createElement(K.a,null))),s.a.createElement(x.a,{primary:"Descripci\xf3n",secondary:V.hasOwnProperty("description")?V.description:"No posee descripci\xf3n"})),s.a.createElement(z.a,null),s.a.createElement(G.a,null,s.a.createElement(U.a,null,s.a.createElement(F.a,{className:e.avatar},s.a.createElement(H.a,null))),s.a.createElement(x.a,{primary:"Creador",secondary:V.hasOwnProperty("creator")?V.creator.email:""})),s.a.createElement(z.a,null),s.a.createElement(G.a,null,s.a.createElement(U.a,null,s.a.createElement(F.a,{className:e.avatar},s.a.createElement(X.a,null))),s.a.createElement(x.a,{primary:"Inicio",secondary:me.start})),s.a.createElement(z.a,null),s.a.createElement(G.a,null,s.a.createElement(U.a,null,s.a.createElement(F.a,{className:e.avatar},s.a.createElement(X.a,null))),s.a.createElement(x.a,{primary:"Final",secondary:me.end})))),s.a.createElement(u.a,{elevation:4,className:e.root},s.a.createElement(p.a,{selectable:!0,select:function(e){var a=e.startStr.substr(0,19),t=e.endStr.substr(0,19);qe(!0),Ge(pe({},xe,{inicio:a,fin:t})),19===a.length?He({colorId:ta,start:{dateTime:a,timeZone:"America/Lima"},end:{dateTime:t,timeZone:"America/Lima"},reminders:{useDefault:!1,overrides:[{method:"email",minutes:30},{method:"popup",minutes:10}]}}):10===a.length&&He({colorId:ta,start:{date:a},end:{date:t},reminders:{useDefault:!1,overrides:[{method:"email",minutes:1440},{method:"popup",minutes:10}]}})},weekNumbers:!0,editable:!0,defaultView:"dayGridMonth",plugins:[f.d,E.a,h.a,g.f,b.a,v.a,y.a],themeSystem:"standart",events:n,header:{left:"prev,next, today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listMonth"},locale:Pe.locale,eventClick:function(e){ua(e.event.id),Ce(e.event.backgroundColor),Te(e.event.id)},eventLimit:!0,eventTextColor:"#fff",eventBorderColor:"rgba(0, 0, 0, 0)",navLinks:!0,schedulerLicenseKey:"GPL-My-Project-Is-Open-Source",slotDuration:"00:15",nowIndicator:!0,eventTimeFormat:{hour:"2-digit",minute:"2-digit",second:"2-digit",meridiem:!0}})))}}}]);
//# sourceMappingURL=16.275d36ca.chunk.js.map